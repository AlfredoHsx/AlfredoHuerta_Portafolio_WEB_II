<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Estados y Municipios</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Seleccione un estado</h1>
    <select id="estado-select">
        <option value="">--Seleccione un estado--</option>
        {% for estado in estados %}
            <option value="{{ estado.id }}">{{ estado.nombre }}</option>
        {% endfor %}
    </select>

    <h2>Municipios</h2>
    <ul id="municipios-list"></ul>

    <script>
        $('#estado-select').change(function() {
            const estadoId = $(this).val();
            if (estadoId) {
                $.ajax({
                    url: '{% url "cargar_municipios" %}',
                    data: {'estado_id': estadoId},
                    success: function(data) {
                        $('#municipios-list').empty();
                        data.forEach(function(municipio) {
                            $('#municipios-list').append('<li>' + municipio.nombre + '</li>');
                        });
                    }
                });
            } else {
                $('#municipios-list').empty();
            }
        });
    </script>
</body>
</html>
